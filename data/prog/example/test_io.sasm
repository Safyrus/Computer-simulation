# adr of devices:
# disk : 0000 - BFFF
# ram  : C000 - DFFC
# key  : DFFE - DFFF
# scr  : E000 - FFFF


# Setup screen
SET 10 E1 00 # resX
SET 10 E1 01 # resY
SET 00 E1 02 # mode

# While ...
MAIN:
    # Get char from keyboard
    GET $A DF FE

    # Check if something was press
    CMP $A 00

    # if not, redo
    JMP 04 :MAIN

    # if ESC was press then stop else continue
    CMP $A 1B
    JMP 04 :STOP

    # else send random value to the pixel equal to the char value
    OR  $B $R E0
    MOV $C $R
    SET $A $B $C
    #get the data store in the screen to check if it works
    GET $D $B $C

    # loop
    JMP $F :MAIN
STOP:
    OFF